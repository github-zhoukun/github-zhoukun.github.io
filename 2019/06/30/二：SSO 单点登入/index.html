<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="äºŒï¼šSSO å•ç‚¹ç™»å…¥ æ¬²é€Ÿåˆ™ä¸è¾¾  Why å•ç‚¹ç™»å…¥ï¼Ÿä¸€æ¬¡ç™»å…¥ï¼Œåˆ°å¤„ç•…è¡Œï¼ å‰é¢æˆ‘ä»¬è®²äº†æ°´å¹³æ‰©å®¹å¤šæœºéƒ¨ç½²æ—¶Sessionä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼åœ¨æˆ‘ä»¬å…¬å¸æ—¥å¸¸å¼€å‘ä¸­ä¸€èˆ¬ä¸æ­¢ä¸€ä¸ªåº”ç”¨å¦‚ï¼šå•†å“ / è®¢å• / å®¢æˆ· è¿™äº›æ¨¡å—éƒ½è¦æœ‰ç™»å…¥ï¼æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®²ç™»å…¥åšæˆæ¨¡å—å½¢å¼æ¥ç»Ÿä¸€ç®¡ç†å‘¢ï¼Ÿï¼Ÿ  é€šè¿‡ä¸Šå›¾å¯çŸ¥æˆ‘ä»¬åˆ†ä¸º3å¤§å—    SSO-Client   SSO-Service  User-Service   SSO-">
<meta property="og:type" content="article">
<meta property="og:title" content="äºŒï¼šSSO å•ç‚¹ç™»å…¥">
<meta property="og:url" content="https://github-zhoukun.github.io/2019/06/30/äºŒï¼šSSO å•ç‚¹ç™»å…¥/index.html">
<meta property="og:site_name" content="Hello Stranger">
<meta property="og:description" content="äºŒï¼šSSO å•ç‚¹ç™»å…¥ æ¬²é€Ÿåˆ™ä¸è¾¾  Why å•ç‚¹ç™»å…¥ï¼Ÿä¸€æ¬¡ç™»å…¥ï¼Œåˆ°å¤„ç•…è¡Œï¼ å‰é¢æˆ‘ä»¬è®²äº†æ°´å¹³æ‰©å®¹å¤šæœºéƒ¨ç½²æ—¶Sessionä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼åœ¨æˆ‘ä»¬å…¬å¸æ—¥å¸¸å¼€å‘ä¸­ä¸€èˆ¬ä¸æ­¢ä¸€ä¸ªåº”ç”¨å¦‚ï¼šå•†å“ / è®¢å• / å®¢æˆ· è¿™äº›æ¨¡å—éƒ½è¦æœ‰ç™»å…¥ï¼æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®²ç™»å…¥åšæˆæ¨¡å—å½¢å¼æ¥ç»Ÿä¸€ç®¡ç†å‘¢ï¼Ÿï¼Ÿ  é€šè¿‡ä¸Šå›¾å¯çŸ¥æˆ‘ä»¬åˆ†ä¸º3å¤§å—    SSO-Client   SSO-Service  User-Service   SSO-">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github-zhoukun.github.io/images/SSOå¤§æ¦‚æµç¨‹æ¨¡å—åˆ’åˆ†å›¾.png">
<meta property="og:image" content="https://github-zhoukun.github.io/images/ssoç›®å½•ç»“æ„.jpg">
<meta property="og:updated_time" content="2019-06-30T11:46:03.228Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="äºŒï¼šSSO å•ç‚¹ç™»å…¥">
<meta name="twitter:description" content="äºŒï¼šSSO å•ç‚¹ç™»å…¥ æ¬²é€Ÿåˆ™ä¸è¾¾  Why å•ç‚¹ç™»å…¥ï¼Ÿä¸€æ¬¡ç™»å…¥ï¼Œåˆ°å¤„ç•…è¡Œï¼ å‰é¢æˆ‘ä»¬è®²äº†æ°´å¹³æ‰©å®¹å¤šæœºéƒ¨ç½²æ—¶Sessionä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼åœ¨æˆ‘ä»¬å…¬å¸æ—¥å¸¸å¼€å‘ä¸­ä¸€èˆ¬ä¸æ­¢ä¸€ä¸ªåº”ç”¨å¦‚ï¼šå•†å“ / è®¢å• / å®¢æˆ· è¿™äº›æ¨¡å—éƒ½è¦æœ‰ç™»å…¥ï¼æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®²ç™»å…¥åšæˆæ¨¡å—å½¢å¼æ¥ç»Ÿä¸€ç®¡ç†å‘¢ï¼Ÿï¼Ÿ  é€šè¿‡ä¸Šå›¾å¯çŸ¥æˆ‘ä»¬åˆ†ä¸º3å¤§å—    SSO-Client   SSO-Service  User-Service   SSO-">
<meta name="twitter:image" content="https://github-zhoukun.github.io/images/SSOå¤§æ¦‚æµç¨‹æ¨¡å—åˆ’åˆ†å›¾.png">






  <link rel="canonical" href="https://github-zhoukun.github.io/2019/06/30/äºŒï¼šSSO å•ç‚¹ç™»å…¥/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>äºŒï¼šSSO å•ç‚¹ç™»å…¥ | Hello Stranger</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello Stranger</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github-zhoukun.github.io/2019/06/30/äºŒï¼šSSO å•ç‚¹ç™»å…¥/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æ‹”å‰‘å››é¡¾å¿ƒèŒ«ç„¶">
      <meta itemprop="description" content="è§†å…¶æ‰€ä»¥ è§‚å…¶æ‰€ç”± å¯Ÿå…¶æ‰€å®‰">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Stranger">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">äºŒï¼šSSO å•ç‚¹ç™»å…¥

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-30 19:41:29 / Modified: 19:46:03" itemprop="dateCreated datePublished" datetime="2019-06-30T19:41:29+08:00">2019-06-30</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="äºŒï¼šSSO-å•ç‚¹ç™»å…¥"><a href="#äºŒï¼šSSO-å•ç‚¹ç™»å…¥" class="headerlink" title="äºŒï¼šSSO å•ç‚¹ç™»å…¥"></a>äºŒï¼šSSO å•ç‚¹ç™»å…¥</h1><blockquote>
<p>æ¬²é€Ÿåˆ™ä¸è¾¾</p>
</blockquote>
<h2 id="Why-å•ç‚¹ç™»å…¥ï¼Ÿ"><a href="#Why-å•ç‚¹ç™»å…¥ï¼Ÿ" class="headerlink" title="Why å•ç‚¹ç™»å…¥ï¼Ÿ"></a>Why å•ç‚¹ç™»å…¥ï¼Ÿ</h2><p><strong>ä¸€æ¬¡ç™»å…¥ï¼Œåˆ°å¤„ç•…è¡Œï¼</strong></p>
<p>å‰é¢æˆ‘ä»¬è®²äº†æ°´å¹³æ‰©å®¹å¤šæœºéƒ¨ç½²æ—¶Sessionä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼åœ¨æˆ‘ä»¬å…¬å¸æ—¥å¸¸å¼€å‘ä¸­ä¸€èˆ¬ä¸æ­¢ä¸€ä¸ªåº”ç”¨å¦‚ï¼šå•†å“ / è®¢å• / å®¢æˆ· è¿™äº›æ¨¡å—éƒ½è¦æœ‰ç™»å…¥ï¼æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®²ç™»å…¥åšæˆæ¨¡å—å½¢å¼æ¥ç»Ÿä¸€ç®¡ç†å‘¢ï¼Ÿï¼Ÿ</p>
<p><img src="/images/SSOå¤§æ¦‚æµç¨‹æ¨¡å—åˆ’åˆ†å›¾.png" alt="SSOå¤§æ¦‚æµç¨‹æ¨¡å—åˆ’åˆ†å›¾"></p>
<p>é€šè¿‡ä¸Šå›¾å¯çŸ¥æˆ‘ä»¬åˆ†ä¸º3å¤§å—  </p>
<ul>
<li><p><strong>SSO-Client</strong> </p>
</li>
<li><p><strong>SSO-Service</strong></p>
</li>
<li><p><strong>User-Service</strong></p>
</li>
</ul>
<h4 id="SSO-Client"><a href="#SSO-Client" class="headerlink" title="SSO-Client"></a>SSO-Client</h4><p>ä¸»è¦åšç™»å…¥æ‹¦æˆªï¼Œè¿™ä¸ªæ˜¯åšæˆJaråŒ…çš„æ–¹å¼é›†æˆè¿›ç›®æ ‡åº”ç”¨ã€‚</p>
<ul>
<li><p>æ‹¦æˆªæ–¹å¼</p>
<ul>
<li><p><strong>javax.servlet.Filter servlet</strong> è¿‡æ»¤å™¨æ–¹å¼</p>
</li>
<li><p><strong>org.springframework.web.servlet.HandlerInterceptor</strong> Springæ‹¦æˆªå™¨æ–¹å¼</p>
</li>
</ul>
</li>
</ul>
<h4 id="SSO-Service"><a href="#SSO-Service" class="headerlink" title="SSO-Service"></a>SSO-Service</h4><p>ä¸»è¦ç”¨äºç™»å…¥ï¼Œèº«ä»½è®¤è¯ï¼ä¸€äº›å¸¸ç”¨ä¿¡æ¯å­˜å‚¨ç­‰ã€‚</p>
<h4 id="User-Service"><a href="#User-Service" class="headerlink" title="User-Service"></a>User-Service</h4><p>éœ€è¦ç™»å…¥çš„è¯å¿…ç„¶æˆ‘ä»¬å°±éœ€è¦ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ“ä½œçš„ï¼å…¶å®æ˜¯ä½œä¸ºä¸€ä¸ªå•ç‹¬ä½œä¸ºä¸€ä¸ªä¾èµ–æœåŠ¡çš„ã€‚</p>
<hr>
<h2 id="Why-åŒåŸŸå’Œè·¨åŸŸï¼Ÿ"><a href="#Why-åŒåŸŸå’Œè·¨åŸŸï¼Ÿ" class="headerlink" title="Why åŒåŸŸå’Œè·¨åŸŸï¼Ÿ"></a>Why åŒåŸŸå’Œè·¨åŸŸï¼Ÿ</h2><pre><code>è¿™æ˜¯æµè§ˆå™¨ä¸ºäº†å®‰å…¨çš„ä¸€ç§ä¿æŠ¤è¡Œä¸ºï¼**è·¨åŸŸèµ„æºè°ƒåº¦é™åˆ¶**ã€‚ä½ å¯ä»¥è¯•ç€è€ƒè™‘ä¸‹ï¼Œä½ å…ˆç™»å…¥www.taobao.comï¼Œç„¶åå†ç™»å…¥ www.baidu.comã€‚ éš¾é“ä½ è¦æŠŠæ·˜å®åŸŸåä¸‹çš„cookieå‘é€ç»™ç™¾åº¦çš„æœåŠ¡å™¨å—ï¼Ÿ 

ä½†æ˜¯æˆ‘ä»¬æ­£å¸¸çš„å¼€å‘ä¸­å¯èƒ½ä¸€ä¸ªå…¬å¸å†…éƒ¨æœ‰å¤šä¸ªç³»ç»Ÿå¤šä¸ªåŸŸåï¼Œæˆ‘ä»¬éœ€è¦æ‰“é€šçš„å„ä¸ªç³»ç»Ÿçš„ç™»å…¥ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±é¢ä¸´æ–°çš„æŒ‘æˆ˜äº†ï¼ **è·¨åŸŸ**
</code></pre><h4 id="åŒæºç­–ç•¥ï¼š"><a href="#åŒæºç­–ç•¥ï¼š" class="headerlink" title="åŒæºç­–ç•¥ï¼š"></a>åŒæºç­–ç•¥ï¼š</h4><blockquote>
<p>åè®® | åŸŸå | ç«¯å£ éƒ½è¦ç›¸åŒï¼Œä¸ç„¶å°±ä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜</p>
</blockquote>
<table>
<thead>
<tr>
<th>URL</th>
<th>è¯´æ˜</th>
<th>æ˜¯å¦è·¨åŸŸ</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.taobao.com/item" target="_blank" rel="noopener">http://www.taobao.com/item</a>  <a href="http://www.taobao.com/user" target="_blank" rel="noopener">http://www.taobao.com/user</a></td>
<td>ç›¸åŒåè®®,åŸŸå,ç«¯å£</td>
<td>å¦</td>
</tr>
<tr>
<td><a href="http://www.taobao.com/item/app.js" target="_blank" rel="noopener">http://www.taobao.com/item/app.js</a> <a href="http://www.taobao.com/user/defult.js" target="_blank" rel="noopener">http://www.taobao.com/user/defult.js</a></td>
<td>ç›¸åŒåè®®,åŸŸå,ç«¯å£       ä¸åŒèµ„æº</td>
<td>å¦</td>
</tr>
<tr>
<td><a href="http://www.zk.com:8080" target="_blank" rel="noopener">http://www.zk.com:8080</a>  <a href="http://www.zk.com:8083" target="_blank" rel="noopener">http://www.zk.com:8083</a></td>
<td>ç›¸åŒåè®®,åŸŸå      ä¸åŒç«¯å£</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><a href="http://www.zk.com:8080" target="_blank" rel="noopener">http://www.zk.com:8080</a>  <a href="https://www.zk.com:8080" target="_blank" rel="noopener">https://www.zk.com:8080</a></td>
<td>ç›¸åŒåŸŸå,ç«¯å£      ä¸åŒåè®®</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a>   <a href="http://www.zk.com:8080" target="_blank" rel="noopener">http://www.zk.com:8080</a></td>
<td>å¦‚æœè¯¥åŸŸåæŒ‡å‘çš„å°±æ˜¯è¯¥IP   ä¹Ÿæ˜¯è·¨åŸŸäº†</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><a href="http://www.zk.com:8080" target="_blank" rel="noopener">http://www.zk.com:8080</a>  <a href="http://user.zk.com:8080" target="_blank" rel="noopener">http://user.zk.com:8080</a></td>
<td>ä¸»åŸŸå’Œå­åŸŸ</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a>  <a href="http://www.taobao.com" target="_blank" rel="noopener">http://www.taobao.com</a></td>
<td>ä¸åŒåŸŸå</td>
<td>æ˜¯</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š"><a href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š"></a>è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š</h4><ul>
<li><p><strong>JSONPï¼š</strong> è¿™ä¸ªæ–¹æ¡ˆåªæ”¯æŒGETè¯·æ±‚ï¼Œé‡åˆ°æºå¸¦ä¿¡æ¯é‡è¾ƒå¤§çš„è¯ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚æš‚æ—¶æˆ‘æ²¡æœ‰è¯¦ç»†ç ”ç©¶ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚ä¼˜ç‚¹æ˜¯æ”¯æŒæ¯”è¾ƒè€å¾—æµè§ˆå™¨ï¼</p>
</li>
<li><p><strong>CORSï¼š</strong> å…¨ç§° <strong>è·¨åŸŸèµ„æºå…±äº«</strong>  æ³¨æ„ï¼šè¿™ä¸ªéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚é™¤äº†ä¸€äº›å¾®è½¯ç³»åˆ—æ¯”è¾ƒè€å¾—æµè§ˆå™¨ï¼Œç°åœ¨å¸‚é¢è°·æ­Œï¼Œç«ç‹ï¼ŒçŒè±¹å•Šçš„éƒ½æ”¯æŒçš„ã€‚è«åæ‰“äº†å¹¿å‘Šå“ˆå“ˆğŸ˜…ã€‚</p>
</li>
<li><p>â€¦ å…¶ä»–æ–¹æ¡ˆç½‘ä¸Šç»™å‡ºæ¥çš„æ€»å…±8ç§å§ï¼Œåº”ç”¨æˆ‘è§‰å¾—ä¸»è¦å°±æ˜¯ä»¥ä¸Šä¸¤ç§ã€‚</p>
<p>  å¥½æ»´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®²è®² CORS !</p>
</li>
</ul>
<h4 id="ä¸¤ç§è¯·æ±‚ï¼š"><a href="#ä¸¤ç§è¯·æ±‚ï¼š" class="headerlink" title="ä¸¤ç§è¯·æ±‚ï¼š"></a>ä¸¤ç§è¯·æ±‚ï¼š</h4><pre><code>æµè§ˆå™¨ä¼šå°†CORSè¯·æ±‚åˆ†ä¸ºï¼š**ç®€å•è¯·æ±‚**ï¼ˆsimple requestï¼‰ å’Œ  **éç®€å•è¯·æ±‚**ï¼ˆnot-so-simple requestï¼‰
</code></pre><ul>
<li><p><strong>ç®€å•è¯·æ±‚ï¼š</strong> éœ€è¦æ»¡è¶³ä¸¤å¤§æ¡ä»¶</p>
<ul>
<li><p>è¯·æ±‚æ–¹æ³•ï¼šä¸‰ç§ä¹‹ä¸€å°±å¥½ï¼</p>
<ul>
<li><p>HEAD</p>
</li>
<li><p>GET</p>
</li>
<li><p>POST</p>
</li>
</ul>
</li>
<li><p>è¯·æ±‚å­—æ®µï¼šä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µã€‚</p>
<ul>
<li><p>Accpet : ä»£è¡¨å‘é€ç«¯å¸Œæœ›æ¥æ”¶çš„æ•°æ®ç±»å‹ï¼ˆåª’ä½“ç±»å‹èµ„æºï¼‰</p>
</li>
<li><p>Accpet-Languageï¼šä»£è¡¨å®¢æˆ·ç«¯å¸Œæœ›æ¥æ”¶çš„è¯­è¨€ç±»å‹</p>
</li>
<li><p>Content-Languageï¼šä»£è¡¨å‘é€ç«¯çš„è¯­è¨€ç±»å‹</p>
</li>
<li><p>Last-Event-IDï¼š</p>
</li>
<li><p>Content-Type: ä»£è¡¨å‘é€ç«¯çš„æ•°æ®ç±»å‹ï¼ˆåª’ä½“ç±»å‹èµ„æºï¼‰ï¼Œåªé™ä¸‰ä¸ªå€¼ï¼</p>
<ul>
<li><p>application/x-www-form-urlencoded</p>
</li>
<li><p>multipart/form-data</p>
</li>
<li><p>text/plain</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>éç®€å•è¯·æ±‚ï¼š</strong> ä¼šåœ¨æ­£å¼è¯·æ±‚ä¹‹å‰å¢åŠ ä¸€ä¸ªé¢„æ£€æŸ¥è¯·æ±‚ï¼ˆoptions ç±»å‹ï¼‰æ³¨æ„éœ€è¦é…ç½®æ–‡ä»¶web.xmlå¼€å¯è¿™ä¸ªè¯·æ±‚ç±»å‹ï¼æ”¶åˆ°è¯·æ±‚åæ‰ä¼šæ‰§è¡ŒçœŸæ­£çš„æ“ä½œã€‚</p>
</li>
</ul>
<p><strong>ä¸Šç¡¬èœ ä»£ç ï¼š</strong> springBooté¡¹ç›®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * webé…ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoukun</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                <span class="comment">//æˆæƒçš„è®¿é—®æº</span></span><br><span class="line">                .allowedOrigins(<span class="string">"*"</span>)</span><br><span class="line">                <span class="comment">//å…è®¸çš„è¯·æ±‚åŠ¨è¯</span></span><br><span class="line">                .allowedMethods(<span class="string">"POST, GET, OPTIONS, DELETE"</span>)</span><br><span class="line">                <span class="comment">//é¢„æ£€æˆæƒçš„æœ‰æ•ˆæœŸï¼Œå•ä½ï¼šç§’</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>)</span><br><span class="line">                <span class="comment">//é¢å¤–å…è®¸è®¿é—®çš„å“åº”å¤´</span></span><br><span class="line">                .allowedHeaders(<span class="string">"x-requested-with"</span>)</span><br><span class="line">                <span class="comment">//æ˜¯å¦å…è®¸æºå¸¦</span></span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼°è®¡ä½ ä»¬è‚¯å®šä¼šæƒ³å°±è¿™ä¹ˆç®€å•å—ï¼Ÿ æˆ‘æƒ³è¯´æ˜¯çš„ã€‚è¿˜æ˜¯æ‰©å±•æ€§æ›´å¼ºçš„å†™æ³•ã€‚</p>
<p><strong>é…ç½®è¯¦è§£ï¼š</strong></p>
<ul>
<li><p><strong>Access-Control-Allow-Origin å¿…å¡«ï¼š</strong> å¿…å¡« æˆæƒè®¿é—®èµ„æº * è¡¨ç¤ºæ‰€æœ‰èµ„æºå¯ä»¥è®¿é—®ã€‚ä½ ä¹Ÿå¯ä»¥å¡«å†™ä¸€ä¸ªå…·ä½“çš„åŸŸå</p>
</li>
<li><p><strong>Access-Control-Allow-Methods å¿…å¡«ï¼š</strong> å…è®¸è·¨åŸŸçš„æ–¹æ³• å¦‚POST, GET â€¦</p>
</li>
<li><p><strong>Access-Control-Max-Ageï¼š</strong> é¢„æˆæƒï¼ˆéç®€å•è¯·æ±‚çš„é¢„æ£€æŸ¥ï¼‰çš„æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸå†…ä¸ç”¨åœ¨å‘é€ä¸€æ¡æ£€æŸ¥è¯·æ±‚ã€‚</p>
</li>
<li><p><strong>Access-Control-Expose-Headersï¼š</strong> é¢å¤–å…è®¸è®¿é—®çš„å“åº”å¤´ CORSè¯·æ±‚æ—¶ï¼ŒXMLHttpRequestå¯¹è±¡çš„getResponseHeader()æ–¹æ³•åªèƒ½æ‹¿åˆ°6ä¸ªåŸºæœ¬å­—æ®µï¼šCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragmaã€‚å¦‚æœæƒ³æ‹¿åˆ°å…¶ä»–å­—æ®µï¼Œå°±å¿…é¡»åœ¨Access-Control-Expose-Headersé‡Œé¢æŒ‡å®šã€‚</p>
</li>
<li><p><strong>Access-Control-Allow-Credentialsï¼š</strong> æ˜¯å¦å…è®¸æºå¸¦cookie ,é»˜è®¤ä¸æºå¸¦ï¼Œæˆ‘ä»¬åœ¨Cookieå­˜å‚¨Tokenè‚¯å®šæ˜¯éœ€è¦çš„ï¼</p>
</li>
</ul>
<p>æˆ‘è‚¯å®šå†™çš„æ¯”è¾ƒåˆ†æ•£ æœ‰ç‚¹åƒçŸ®å¤§ç´§æƒ³åˆ°å“ªé‡Œï¼Œå°±è®²åˆ°å“ªé‡Œå‘¢ï¼ å¤§å®¶ä¸è¦åœ¨æ„è¿™äº›ç»†èŠ‚ï¼Œæˆ‘æ”¶å›æ¥ã€‚</p>
<hr>
<h2 id="ä»£ç å®ç°SSOï¼"><a href="#ä»£ç å®ç°SSOï¼" class="headerlink" title="ä»£ç å®ç°SSOï¼"></a>ä»£ç å®ç°SSOï¼</h2><p><img src="/images/ssoç›®å½•ç»“æ„.jpg" alt="ssoç›®å½•ç»“æ„"></p>
<h4 id="SSO-Client-ä»£ç "><a href="#SSO-Client-ä»£ç " class="headerlink" title="SSO-Client: ä»£ç "></a>SSO-Client: ä»£ç </h4><ol>
<li><p>æ–°å»ºSpring-Boot å·¥ç¨‹ï¼åå­—ssoï¼Œ åˆ›å»ºå­æ¨¡å—sso-client</p>
</li>
<li><p>pom.xml</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;!-- httpå®¢æˆ·ç«¯ --&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;httpclient&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">4.5</span><span class="number">.9</span>&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">   &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»ºæ‹¦æˆªå™¨ æˆ‘è¿™é‡Œé€‰ç”¨çš„Interceptoræ–¹å¼</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å…¥æ‹¦æˆª</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoukun</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String OK = <span class="string">"ok"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String token = request.getHeader(<span class="string">"token"</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(token)) &#123;</span><br><span class="line">            token = request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(token)) &#123;</span><br><span class="line">            Cookie[] cookies = request.getCookies();</span><br><span class="line">            <span class="keyword">if</span> (cookies != <span class="keyword">null</span> &amp;&amp; cookies.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (cookie.getName().equals(<span class="string">"token"</span>)) &#123;</span><br><span class="line">                        token = cookie.getValue();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        String originUrl = request.getRequestURL().toString();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(token)) &#123;</span><br><span class="line">            response.sendRedirect(<span class="string">"http://127.0.0.1:2080?originUrl="</span> + originUrl);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        if (!StringUtils.isEmpty(token)) &#123;</span></span><br><span class="line"><span class="comment">//            Cookie cookie = new Cookie("token", token);</span></span><br><span class="line"><span class="comment">//            cookie.setDomain("zk.com");</span></span><br><span class="line"><span class="comment">//            response.addCookie(cookie);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"token"</span>, token);</span><br><span class="line">        String result = httpClientGet(map);</span><br><span class="line">        <span class="keyword">if</span> (OK.equalsIgnoreCase(result)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(<span class="string">"http://127.0.0.1:2080?originUrl="</span> + originUrl);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">httpClientGet</span><span class="params">(Map&lt;String, String&gt; map)</span> <span class="keyword">throws</span> URISyntaxException, IOException </span>&#123;</span><br><span class="line">        CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br><span class="line"></span><br><span class="line">        List&lt;NameValuePair&gt; params = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        map.forEach((k, v) -&gt;</span><br><span class="line">                params.add(<span class="keyword">new</span> BasicNameValuePair(k, v))</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        URI uri = <span class="keyword">new</span> URIBuilder().setScheme(<span class="string">"http"</span>).setHost(<span class="string">"localhost"</span>)</span><br><span class="line">                .setPort(<span class="number">2080</span>).setPath(<span class="string">"/auth/token"</span>)</span><br><span class="line">                .setParameters(params).build();</span><br><span class="line"></span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(uri);</span><br><span class="line">        CloseableHttpResponse response = httpClient.execute(get);</span><br><span class="line"></span><br><span class="line">        HttpEntity responseEntity = response.getEntity();</span><br><span class="line">        System.out.println(<span class="string">"å“åº”çŠ¶æ€ä¸º:"</span> + response.getStatusLine());</span><br><span class="line">        String result = EntityUtils.toString(responseEntity);</span><br><span class="line"></span><br><span class="line">        httpClient.close();</span><br><span class="line">        response.close();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SSO-Service-ä»£ç ï¼š"><a href="#SSO-Service-ä»£ç ï¼š" class="headerlink" title="SSO-Service ä»£ç ï¼š"></a>SSO-Service ä»£ç ï¼š</h4><ol>
<li><p>sso ä¸‹é¢æ–°å»ºå­å·¥ç¨‹ sso-servie</p>
</li>
<li><p>ç¼–å†™jwt å·¥å…·ç±»ä¸Šç¯‡æ–‡ç« å·²ç»ä»‹ç»è¿‡äº†è¿™é‡Œå°±ä¸å¤šè®²</p>
</li>
<li><p>pom.xml</p>
</li>
</ol>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>4.ç¼–å†™ ç™»å…¥ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å…¥é¡µé¢</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoukun</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">form</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        String originUrl = request.getParameter(<span class="string">"originUrl"</span>);</span><br><span class="line">        request.getSession().setAttribute(<span class="string">"originUrl"</span>, originUrl);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">                        @RequestParam(<span class="string">"username"</span>)</span> String username, @<span class="title">RequestParam</span><span class="params">(<span class="string">"password"</span>)</span> String password) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(username)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"username not null"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(password)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"password not null"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        UserDo userDo = userService.verifyUser(username, password);</span><br><span class="line">        <span class="keyword">if</span> (userDo == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"å¯†ç æˆ–è€…è´¦å·é”™è¯¯!"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Map&lt;String, String&gt; claims = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        claims.put(<span class="string">"id"</span>, String.valueOf(userDo.getId()));</span><br><span class="line">        claims.put(<span class="string">"username"</span>, userDo.getUserName());</span><br><span class="line">        LocalDateTime exprieLocalDateTime = LocalDateTime.now().plusMinutes(<span class="number">10L</span>);</span><br><span class="line">        ZonedDateTime zonedDateTime = exprieLocalDateTime.atZone(ZoneId.systemDefault());</span><br><span class="line">        String token = JwtUtil.generateToken(claims, Date.from(zonedDateTime.toInstant()));</span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"token"</span>, token);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        response.setHeader(<span class="string">"token"</span>, token);</span><br><span class="line">        String originUrl = (String) request.getSession().getAttribute(<span class="string">"originUrl"</span>);</span><br><span class="line">        response.sendRedirect(originUrl + <span class="string">"?token="</span> + token);</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>è®¤è¯ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¤è¯Token</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhoukun</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"auth"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthTokenController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String OK = <span class="string">"OK"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String FAIL = <span class="string">"FAIL"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"token"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">authToken</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        String token = request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Map&lt;String, String&gt; map = JwtUtil.verifyToken(token);</span><br><span class="line">            <span class="keyword">return</span> OK;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> FAIL;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å°å™ï¼š"><a href="#å°å™ï¼š" class="headerlink" title="å°å™ï¼š"></a>å°å™ï¼š</h4><p>è¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å®ç°å¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¸æ˜¯ç‰¹åˆ«éªŒè¯ï¼Œæ¯”å¦‚è·¨åŸŸæºå¸¦ï¼Œ jwtTokenå®æ—¶åˆ·æ–°ç­‰ç­‰é—®é¢˜ï¼Œéƒ½æ²¡æœ‰è§£å†³ è¿™ä¸ªè¿™æ˜¯æ‰“ä¸ªæ ·ï¼Œæˆ‘ä»¬ä»€ä¹ˆéƒ½æ˜¯ä»ç®€å•åˆ°æ·±å…¥ï¼Œè¸©å¾ˆå¤šå‘å’Œé›·çš„ã€‚æ¥ä¸‹çš„æ–‡ç« ä¼šæ›´åŠ æ·±å…¥æ¢è®¨è¿™äº›é—®é¢˜çš„ã€‚</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/23/ssoBase01/" rel="next" title="ä¸€ï¼šSSO åŸºç¡€ç¯‡">
                <i class="fa fa-chevron-left"></i> ä¸€ï¼šSSO åŸºç¡€ç¯‡
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">æ‹”å‰‘å››é¡¾å¿ƒèŒ«ç„¶</p>
              <p class="site-description motion-element" itemprop="description">è§†å…¶æ‰€ä»¥ è§‚å…¶æ‰€ç”± å¯Ÿå…¶æ‰€å®‰</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#äºŒï¼šSSO-å•ç‚¹ç™»å…¥"><span class="nav-number">1.</span> <span class="nav-text">äºŒï¼šSSO å•ç‚¹ç™»å…¥</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-å•ç‚¹ç™»å…¥ï¼Ÿ"><span class="nav-number">1.1.</span> <span class="nav-text">Why å•ç‚¹ç™»å…¥ï¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SSO-Client"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">SSO-Client</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SSO-Service"><span class="nav-number">1.1.0.2.</span> <span class="nav-text">SSO-Service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#User-Service"><span class="nav-number">1.1.0.3.</span> <span class="nav-text">User-Service</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-åŒåŸŸå’Œè·¨åŸŸï¼Ÿ"><span class="nav-number">1.2.</span> <span class="nav-text">Why åŒåŸŸå’Œè·¨åŸŸï¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#åŒæºç­–ç•¥ï¼š"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">åŒæºç­–ç•¥ï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸¤ç§è¯·æ±‚ï¼š"><span class="nav-number">1.2.0.3.</span> <span class="nav-text">ä¸¤ç§è¯·æ±‚ï¼š</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»£ç å®ç°SSOï¼"><span class="nav-number">1.3.</span> <span class="nav-text">ä»£ç å®ç°SSOï¼</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SSO-Client-ä»£ç "><span class="nav-number">1.3.0.1.</span> <span class="nav-text">SSO-Client: ä»£ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SSO-Service-ä»£ç ï¼š"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">SSO-Service ä»£ç ï¼š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å°å™ï¼š"><span class="nav-number">1.3.0.3.</span> <span class="nav-text">å°å™ï¼š</span></a></li></ol></li></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æ‹”å‰‘å››é¡¾å¿ƒèŒ«ç„¶</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  


  


  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
